<form version="1.1" hideExport="true">
  <label>Armada Infrastructure</label>
  <init>
    <eval token="tok">"&lt;br&gt;"</eval>
    <set token="link"></set>
    <set token="link2"></set>
    <set token="disable">disable</set>
    <set token="tokClickValue1">Select the Hostname from the above panel</set>
    <set token="tokClickValue2">Select the Hostname from the above panel</set>
  </init>
  <!-- Linux Panels-->
  <!--<row>
    <panel depends="$Show_linux_Panels$">
      <title>Network Packet  $tokClickValue1$</title>
      <single>
        <search>
          <query>| mstats avg(_value) prestats=true WHERE metric_name="Network_Interface.Packets_Received/sec" AND "index"="em_metrics" AND "host"="$tokClickValue1$" AND `sai_metrics_indexes` span=1h
| timechart avg(_value) AS "Avg. Packet Received" span=1h
| fields - _span*</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">none</option>
        <option name="height">200</option>
        <option name="rangeColors">["0x1A5276","0x1A5276"]</option>
        <option name="rangeValues">[0]</option>
        <option name="refresh.display">preview</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="underLabel">Network Packet Received/Sec</option>
        <option name="useColors">1</option>
      </single>
      <single>
        <search>
          <query>| mstats avg(_value) prestats=true WHERE metric_name="Network_Interface.Packets_Sent/sec" AND "index"="em_metrics" AND "host"="$tokClickValue1$" AND `sai_metrics_indexes` span=1h
| timechart avg(_value) AS "Avg. Packet Sent" span=1h
| fields - _span*</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">none</option>
        <option name="height">200</option>
        <option name="rangeColors">["0x0E6655","0x0E6655"]</option>
        <option name="rangeValues">[0]</option>
        <option name="refresh.display">preview</option>
        <option name="underLabel">Network Packet Sent/Sec</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel depends="$Show_linux_Panels$">
      <title>Network Packet Sent/Received per sec comparision $tokClickValue1$</title>
      <chart>
        <search>
          <query>| mstats avg(_value)  prestats=true WHERE metric_name="Network_Interface.Packets_Sent/sec" AND "index"="em_metrics" AND "host"="$tokClickValue1$" AND `sai_metrics_indexes` span=1h
| timechart avg(_value) AS "Avg. Packet Sent", avg(recei) AS "Avg. Packet Received"  span=1h
| join type=inner _time [
| mstats avg(_value) as "recei" prestats=true WHERE metric_name="Network_Interface.Packets_Received/sec" AND "index"="em_metrics" AND "host"="XSNW10F134C" AND `sai_metrics_indexes` span=1h
| timechart  avg(_value) AS "Avg. Packet Received"  span=1h]

| fields - _span*</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
  </row>-->
  <fieldset submitButton="false" autoRun="false">
    <html>
      <style>
        /* To change gray body color at the bottom of the dashboard */
              body{
              background-color: white !important;
                  }

        /* Css code for body*/
        .dashboard-body {
    padding: 0 20px 15px 20px;
    background-color: white;
    min-height: 500px;
}

/*To add border line color*/
     .dashboard-panel{
      border: 1px #19367c solid;
     }
     
/* To add BG color for 1st panel*/
   h1.hosttitle{
    background-color: #19367c;
   }
   
 /* To remove border line*/
  #panel1 .dashboard-panel {
        border: none !important;
         }
  #panel2 .dashboard-panel {
        border: none !important;
         }
       
         #panel3 .dashboard-panel {
        border: none !important;
      
         }
         
        /* To hide ... button*/
            
        .dashboard-header .dashboard-menu .edit-other {
	          display:none !important;
             } 
             
        /* To avoid message warning */
i.icon-warning-sign { display:none !important;}
        
        h1  {
    color: #434392;
    }
     /* To increase the left side width of panel*/ 
    .dashboard-row .dashboard-panel .panel-body.html, .dashboard-row .dashboard-panel .panel-body.splunk-html {
    padding: 1px 0px;
}
       .dashboard-row .dashboard-panel h2.panel-title { 
             font-size: 15px !important; 
  color:white; 
  font-weight: Bold; 
  background-color: #19367c; 
  margin-bottom:1%;
   border:1px solid #19367c;
             color:white !important;
             text-align: center !important;
           }
.viz .facet-label {
    font-size: 20px;
    color: black;
    font-weight: bold;
    top : 95%;
    left:-3%;     
    }
    
     [data-view="views/shared/appbar/Button"] [data-role="label"] {
            color: white;
            font-size: 1rem;
             font-weight: 500;
            }
          
          [data-view="views/shared/Icon"][data-icon="triangleDownSmall"] {
            color: white;
            }
        
            h1.dashboard-title{
          color: #19367c !important; }
          
           div[data-view="views/shared/appbar/Master"] {
             background-color: white;
             border-bottom: solid white;
             border-top: solid white;
             background-color:#19367c;
             }
             
              [data-role="app-name"] {
             color: white;
            
              font-weight: 1000;
            }

  [data-role="underline"] {
            background-color: silver !important;
            top: 34px;
            }
            i.icon-alert {
            visibility: hidden;

            }
            .alert {
            visibility: hidden;
            }
            h1{color:#375294}
      </style>
    </html>
    <input type="dropdown" token="time_tok" searchWhenChanged="true">
      <label>Select Time Range</label>
      <choice value="-60m">Last 60 minutes</choice>
      <choice value="-24h">Last 24 hours</choice>
      <choice value="@d">Today</choice>
      <default>-60m</default>
      <change>
        <condition label="Last 60 minutes">
          <set token="earliest">-60m</set>
          <set token="latest">@m</set>
        </condition>
        <condition label="Last 24 hours">
          <set token="earliest">-24h</set>
          <set token="latest">@m</set>
        </condition>
        <condition label="Today">
          <set token="earliest">@d</set>
          <set token="latest">@m</set>
        </condition>
      </change>
    </input>
    <input type="dropdown" token="status" searchWhenChanged="true">
      <label>Host State</label>
      <choice value="*">ALL</choice>
      <fieldForLabel>status</fieldForLabel>
      <fieldForValue>status</fieldForValue>
      <search>
        <query>| inputlookup armada_list_servers.csv  |stats count by status</query>
      </search>
      <!-- <default>*</default>-->
      <default>*</default>
    </input>
    <input type="multiselect" token="hostname" searchWhenChanged="true">
      <label>Host Name</label>
      <choice value="*">ALL</choice>
      <fieldForLabel>Hostname</fieldForLabel>
      <fieldForValue>Hostname</fieldForValue>
      <search>
        <query>| inputlookup armada_list_servers.csv 
|stats count by Hostname</query>
      </search>
      <valuePrefix>Hostname="</valuePrefix>
      <valueSuffix>"</valueSuffix>
      <delimiter> OR </delimiter>
      <default>*</default>
    </input>
  </fieldset>
  <row>
    <panel id="panel1">
      <html>
      <h1 class="hosttitle" style="text-align:center">Host State</h1> 
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <viz type="status_indicator_app.status_indicator">
        <search>
          <query>| inputlookup armada_list_servers.csv 
| search Hostname=XSPW*  AND status=$status$ 
| stats first(status) as status,first(icon_value) as icon_value,first(color_value) as color_value by Hostname
| sort Hostname</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="height">243</option>
        <option name="refresh.display">preview</option>
        <option name="status_indicator_app.status_indicator.colorBy">field_value</option>
        <option name="status_indicator_app.status_indicator.fillTarget">background</option>
        <option name="status_indicator_app.status_indicator.fixIcon">server</option>
        <option name="status_indicator_app.status_indicator.icon">fix_icon</option>
        <option name="status_indicator_app.status_indicator.precision">3</option>
        <option name="status_indicator_app.status_indicator.showOption">2</option>
        <option name="status_indicator_app.status_indicator.staticColor">#dc4e41</option>
        <option name="status_indicator_app.status_indicator.underLabel">true</option>
        <option name="status_indicator_app.status_indicator.useColors">true</option>
        <option name="status_indicator_app.status_indicator.useThousandSeparator">false</option>
        <option name="trellis.enabled">1</option>
        <option name="trellis.size">small</option>
        <drilldown>
          <set token="tokClickValue1">$trellis.value$</set>
          <eval token="link">if(isnull($tokClickValue1$),"","https://splunk.sanofi.com/en-US/app/splunk_app_infrastructure/investigate?ed=host%2C"+$tokClickValue1$+"&amp;efl=50&amp;ep=1&amp;esb=asc&amp;esk=title&amp;etr=MEDIUM&amp;rfi=-1&amp;v=ENTITY&amp;vt=LIST_VIEW"  )</eval>
          <eval token="disable">if(isnull($tokClickValue1$),"disable","enable"  )</eval>
          <set token="Show_windows_Panels">true</set>
          <unset token="Show_linux_Panels"></unset>
          <eval token="tokClickValueUpper">upper($trellis.value$)</eval>
          <eval token="tokClickValueLower">lower($trellis.value$)</eval>
          
          <set token="tokClickValue2">$trellis.value$</set>
         <set token="tokClickValue3">*$tokClickValue2$*</set>
          <eval token="link2">if(isnull($tokClickValue2$),"","https://splunk.sanofi.com/en-US/app/armada_holistic_dashboard_sh/search?q=search%20index%3Dsag_connectivity_normal%20sourcetype%3D%22connectivity%3Aping%3Aserver%3Acsv%22%20"+$tokClickValue3$+"&amp;display.page.search.mode=fast&amp;earliest="+$earliest$+"&amp;latest="+$latest$)</eval>
          <eval token="disable">if(isnull($tokClickValue2$),"disable","enable")</eval>
        </drilldown>
      </viz>
    </panel>
    <panel>
      <viz type="status_indicator_app.status_indicator">
        <search>
          <query>| inputlookup armada_list_servers.csv 
| search Hostname=XSPH*  AND status=$status$ 
| stats first(status) as status,first(icon_value) as icon_value,first(color_value) as color_value by Hostname
| sort Hostname</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="height">243</option>
        <option name="refresh.display">preview</option>
        <option name="status_indicator_app.status_indicator.colorBy">field_value</option>
        <option name="status_indicator_app.status_indicator.fillTarget">background</option>
        <option name="status_indicator_app.status_indicator.fixIcon">server</option>
        <option name="status_indicator_app.status_indicator.icon">fix_icon</option>
        <option name="status_indicator_app.status_indicator.precision">3</option>
        <option name="status_indicator_app.status_indicator.showOption">2</option>
        <option name="status_indicator_app.status_indicator.staticColor">#dc4e41</option>
        <option name="status_indicator_app.status_indicator.underLabel">true</option>
        <option name="status_indicator_app.status_indicator.useColors">true</option>
        <option name="status_indicator_app.status_indicator.useThousandSeparator">false</option>
        <option name="trellis.enabled">1</option>
        <option name="trellis.size">small</option>
        <drilldown>
          <set token="tokClickValue1">$trellis.value$</set>
          <eval token="link">if(isnull($tokClickValue1$),"","https://splunk.sanofi.com/en-US/app/splunk_app_infrastructure/investigate?ed=host%2C"+$tokClickValue1$+"&amp;efl=50&amp;ep=1&amp;esb=asc&amp;esk=title&amp;etr=MEDIUM&amp;rfi=-1&amp;v=ENTITY&amp;vt=LIST_VIEW"  )</eval>
          <eval token="disable">if(isnull($tokClickValue1$),"disable","enable"  )</eval>
          <unset token="Show_windows_Panels"></unset>
          <set token="Show_linux_Panels">true</set>
          <eval token="tokClickValueUpper">upper($trellis.value$)</eval>
          <eval token="tokClickValueLower">lower($trellis.value$)</eval>
           <set token="tokClickValue2">$trellis.value$</set>
          <set token="tokClickValue3">*$tokClickValue2$*</set>
        <eval token="link2">if(isnull($tokClickValue2$),"","https://splunk.sanofi.com/en-US/app/armada_holistic_dashboard_sh/search?q=search%20index%3Dsag_connectivity_normal%20sourcetype%3D%22connectivity%3Aping%3Aserver%3Acsv%22%20"+$tokClickValue3$+"&amp;display.page.search.mode=fast&amp;earliest="+$earliest$+"&amp;latest="+$latest$)</eval>
          <eval token="disable">if(isnull($tokClickValue2$),"disable","enable")</eval>
        </drilldown>
      </viz>
    </panel>
  </row>
    <row>
    <panel id="panel2">
      <html>
      <style>
 #panel3 .enable {
  display: inline-block;
  opacity: 1;
  border-radius: 20px;
border-top-right-radius: 18px;
border-bottom-right-radius: 18px;
white-space: pre-line;
  background-color: #b3e8ff;
  border: none;
  color: black;
  text-align: center;
  font-size: 18px;
  padding: 22px;
  width: 94%;
  transition: all 0.5s;
  
  
  
}
.enable:hover {
 
  box-shadow: none;
  }
  
  .$disable$ span {
  cursor: pointer;
  display: inline-block;
  position: relative;
  transition: 0.5s;
  
}




#panel3 .disable {
 font-size: 18px;
  cursor: not-allowed;
  opacity: 1;
  text-decoration: none;
  white-space: pre-line;
  pointer-events: none;
  display: inline-block;
  border-radius: 15px;
border-top-right-radius: 25px;
border-bottom-right-radius: 25px;
white-space: pre-line;
  background-color: #b3e8ff;
  border: none;
  color: black;
  text-align: center;
  
  padding: 21px;
  width: 95%; 
  transition: all 0.5s;
  
}


  .disable span {
  cursor: pointer;
  display: inline-block;
  position: relative;
  transition: 0.5s;

}



.hosttitle {
 font-size: 25px;
  cursor: not-allowed;
  opacity: 1;
  text-decoration: none;
  pointer-events: none;
  display: inline-block;
  border-color: #000000;
  background-color: #515ba2;
  color: white;
  text-align: center;
  
  padding: 5px;
  width: 98%; 
  transition: all 0.5s;

}

.room {
 font-size: 25px;
  cursor: not-allowed;
  opacity: 1;
  text-decoration: none;
  pointer-events: none;
  display: inline-block;
  border-color: #000000;
  background-color: #515ba2;
  color: White;
  text-align: center;
  
  padding: 5px;
  width: 98%; 
  transition: all 0.5s;

  
}
.room1 {
 font-size: 25px;
  cursor: not-allowed;
  opacity: 1;
  text-decoration: none;
  pointer-events: none;
  display: inline-block;
  border-color: #000000;
  background-color: #515ba2;
  color: White;
  text-align: center;

  padding: 5px;
  width: 98%; 
  transition: all 0.5s;

}

   #panel2 .enable {
  display: inline-block;
  font-size: 18px;
  opacity: 1;
  white-space: pre-line;
 border-top-left-radius: 18px;
 border-bottom-left-radius: 18px;
 border-top-right-radius: 25px;
 border-bottom-right-radius: 25px;
  background-color: #CBC3E3;
  border: none;
  color: black;
  text-align: center;
  padding: 22px;
  width: 95%; 
  transition: all 0.5s;
  
  
  
}

  .$disable$ span {
  cursor: pointer;
  display: inline-block;
  position: relative;
  transition: 0.5s;
  
}

  #panel2 .disable {
 font-size: 18px;
  cursor: not-allowed;
  opacity: 1;
  white-space: pre-line;
  text-decoration: none;
  pointer-events: none;
  display: inline-block;
  border-radius:24px;
 border-top-left-radius: 18px;
 border-bottom-left-radius: 18px;
 border-top-right-radius: 25px;
 border-bottom-right-radius: 25px;

  background-color: #CBC3E3;
  border: none;
  color: black;
  text-align: center;
  
  padding: 22px;
  width: 95%; 
  transition: all 0.5s;
  
}


  .disable span {
  cursor: pointer;
  display: inline-block;
  position: relative;
  transition: 0.5s;

}





.hosttitle {
 font-size: 25px;
  cursor: not-allowed;
  opacity: 1;
  text-decoration: none;
  pointer-events: none;
  display: inline-block;
  border-color: #000000;
  background-color: #515ba2;
  color: white;
  text-align: center;
  
  padding: 5px;
  width: 98%; 
  transition: all 0.5s;

}

.room {
 font-size: 25px;
  cursor: not-allowed;
  opacity: 1;
  text-decoration: none;
  pointer-events: none;
  display: inline-block;
  border-color: #000000;
  background-color: #515ba2;
  color: White;
  text-align: center;
  
  padding: 5px;
  width: 98%; 
  transition: all 0.5s;

  
}
.room1 {
 font-size: 25px;
  cursor: not-allowed;
  opacity: 1;
  text-decoration: none;
  pointer-events: none;
  display: inline-block;
  border-color: #000000;
  background-color: #515ba2;
  color: White;
  text-align: center;

  padding: 5px;
  width: 98%; 
  transition: all 0.5s;

}
    </style>
      <h1 class="$disable$" style="vertical-align:middle">
        <span>To check the Ping status overtime by server : click here â†’ Hostname :</span>
        <a href="$link2$" target="_blank">$tokClickValue2$</a>
          </h1>
      </html>
    </panel>

    <panel id="panel3">
      <html>
   
   <h1 class="$disable$" style="vertical-align:middle"> <span>To redirect to the Splunk app Splunk infrastructure application click here  -&gt;  Hostname ( Only for servers starts with XSPW...) :</span>
    <a href="$link$" target="_blank">$tokClickValue1$</a> </h1> 
  </html>
    </panel>
  </row>
  <row>
    <panel depends="$Show_windows_Panels$">
      <title>CPU Utilization(%) for: $tokClickValue1$</title>
      <chart>
        <search>
          <query>| mstats avg(_value) as avg_idle_cpu WHERE host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" AND metric_name="Processor.%_Idle_Time" AND "index"="em_metrics" AND `sai_metrics_indexes` span=2m 
| eval avg_used_cpu = 100 - avg_idle_cpu 
| eval avg_used_cpu = round(avg_used_cpu, 2) |rename $Show_windows_Panels$ as show_windows
| timechart avg(avg_used_cpu) AS "CPU Utilization"</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.chart.overlayFields">QueueLength</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"CPU Usage (%)":#67A7E3,"QueueLength":#FFC300}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata_armada.csv%20%7Ctimechart%20avg(CPU)%20as%20%22CPU%20Usage%20(%25)%22%20avg(QueueLength)%20as%20QueueLength&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
    <panel depends="$Show_windows_Panels$">
      <title>Memory (%) : $tokClickValue1$</title>
      <chart>
        <search>
          <query>| mstats avg(_value) as avg_mem WHERE host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" AND metric_name="Memory.%_Committed_Bytes_In_Use" AND "index"="em_metrics" AND `sai_metrics_indexes`  span=2m 

| eval avg_mem = round(avg_mem, 0)|rename $Show_windows_Panels$ as show_windows
| timechart avg(avg_mem) AS "Memory Utilization"</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"Memory Used (%)":#EE9B8A}</option>
        <option name="charting.layout.splitSeries">1</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata_armada.csv%20%7Ctimechart%20avg(Memory)%20as%20%22Memory%20Used%20(%25)%22&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
    <panel depends="$Show_windows_Panels$">
      <title>Disk Usage(%) : $tokClickValue1$</title>
      <chart>
        <search>
          <query>| mstats avg(_value) as avg_dutil WHERE host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" AND  metric_name="LogicalDisk.%_Free_Space" AND "index"="em_metrics" AND `sai_metrics_indexes` BY instance  span=5m 
| eval avg_dutil = round(avg_dutil, 0) 
| table avg_dutil instance _time 
| where instance != "_Total" |rename $Show_windows_Panels$ as show_windows
| chart span=15m values(avg_dutil) as UsePct over _time by instance</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"Disk Space Used(%)":#8973BD}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata_armada.csv%20%7Ctimechart%20avg(DiskUsage)%20as%20%22Disk%20Space%20Used(%25)%22&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
  </row>
  <row>
    <panel depends="$Show_windows_Panels$">
      <title>Average Memory Page_Reads/sec : $tokClickValue1$</title>
      <chart>
        <search>
          <query>| mstats avg(_value) prestats=true WHERE host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" metric_name="Memory.Page_Reads/sec" AND "index"="em_metrics" AND `sai_metrics_indexes` span=10s |rename $Show_windows_Panels$ as show_windows
| timechart avg(_value) AS "Memory Page Reads" span=5m 
| fields - _span*</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"Outbound(KB/s)":#ADFF2F,"Inbound(KB/s)":#87CEFA}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata2_armada.csv%20%7Ctimechart%20%20%20avg(Outbound_KB)%20as%20%22Outbound(KB/s)%22%20avg(Inbound_KB)%20as%20%22Inbound(KB/s)%22&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
    <panel depends="$Show_windows_Panels$">
      <title>Memory Commited Bytes In Use : $tokClickValue1$</title>
      <chart>
        <search>
          <query>| mstats avg(_value) prestats=true WHERE metric_name="Memory.%_Committed_Bytes_In_Use" AND "index"="em_metrics" AND host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" AND `sai_metrics_indexes` span=5m |rename $Show_windows_Panels$ as show_windows
| timechart avg(_value) AS "Memory commited bytes in Use" span=5m 
| fields - _span*</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"Outbound(Packets/s)":#FFA500,"Inbound(Packets/s)":#3CB371}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata2_armada.csv%20%7Ctimechart%20%20avg(Inbound_Packets)%20as%20%22Inbound(Packets/s)%22%20avg(Outbound_Packets)%20as%20%22Outbound(Packets/s)%22&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
    <panel depends="$Show_windows_Panels$">
      <title>Logical Disk Free : $tokClickValue1$</title>
      <chart>
        <search>
          <query>| mstats prestats=true avg(LogicalDisk.Free_Megabytes) WHERE (`sai_metrics_indexes`) AND host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" span=1m |rename $Show_windows_Panels$ as show_windows
| timechart span=1m avg(LogicalDisk.Free_Megabytes) as "Megabytes Free"</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"DiskOutput(KB/s)":#E076A9,"DiskInput(KB/s)":#A686B2}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata2_armada.csv%20%7C%20rename%20%22DiskI/O%22%20as%20DiskIO%20%7Ceval%20DiskInput%20=mvindex(split(DiskIO,%22_%22),1)%20%7Ceval%20DiskOutput%20=mvindex(split(DiskIO,%22_%22),0)%20%7Ctimechart%20avg(DiskInput)%20as%20%22DiskInput(KB/s)%22%0Aavg(DiskOutput)%20as%20%22DiskOutput(KB/s)%22&amp;earliest=$timepicker.earliest$&amp;latest=$timepicker.latest$</link>
        </drilldown>
      </chart>
    </panel>
  </row>
  <row>
    <panel depends="$Show_windows_Panels$">
      <title>Network Packet  $tokClickValue1$</title>
      <single>
        <search>
          <query>| mstats avg(_value) prestats=true WHERE metric_name="Network_Interface.Packets_Received/sec" AND "index"="em_metrics" AND host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" AND `sai_metrics_indexes` span=1h|rename $Show_windows_Panels$ as show_windows
| timechart avg(_value) AS "Avg. Packet Received" span=1h
| fields - _span*</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">none</option>
        <option name="height">200</option>
        <option name="rangeColors">["0x1A5276","0x1A5276"]</option>
        <option name="rangeValues">[0]</option>
        <option name="refresh.display">preview</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="underLabel">Network Packet Received/Sec</option>
        <option name="useColors">1</option>
      </single>
      <single>
        <search>
          <query>| mstats avg(_value) prestats=true WHERE metric_name="Network_Interface.Packets_Sent/sec" AND "index"="em_metrics" AND host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" AND `sai_metrics_indexes` span=1h|rename $Show_windows_Panels$ as show_windows
| timechart avg(_value) AS "Avg. Packet Sent" span=1h
| fields - _span*</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">none</option>
        <option name="height">200</option>
        <option name="rangeColors">["0x0E6655","0x0E6655"]</option>
        <option name="rangeValues">[0]</option>
        <option name="refresh.display">preview</option>
        <option name="underLabel">Network Packet Sent/Sec</option>
        <option name="useColors">1</option>
      </single>
    </panel>
    <panel depends="$Show_windows_Panels$">
      <title>Network Packet Sent/Received per sec comparision $tokClickValue1$</title>
      <chart>
        <search>
          <query>| mstats avg(_value) prestats=true WHERE metric_name="Network_Interface.Packets_Sent/sec" AND host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" AND "host"="$tokClickValue1$" AND `sai_metrics_indexes` span=1h |rename $Show_windows_Panels$ as show_windows
| timechart avg(_value) AS "Avg. Packet Sent", avg(recei) AS "Avg. Packet Received" span=1h 
| join type=inner _time 
    [| mstats avg(_value) as "recei" prestats=true WHERE metric_name="Network_Interface.Packets_Received/sec" AND "index"="em_metrics" AND host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" AND `sai_metrics_indexes` span=1h |rename $Show_windows_Panels$ as show_windows
    | timechart avg(_value) AS "Avg. Packet Received" span=1h] 
| fields - _span*</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel depends="$Show_linux_Panels$">
      <title>CPU Utilization(%) for: $tokClickValue1$</title>
      <chart>
        <search>
          <query> index="sag_unix_normal" sourcetype="*:cpu:metrics" host="$tokClickValue1$" |rename $Show_linux_Panels$ as show_linux
    | timechart span=10m latest(UsedPct) AS "CPU Utilization" </query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.chart.overlayFields">QueueLength</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"CPU Usage (%)":#67A7E3,"QueueLength":#FFC300}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata_armada.csv%20%7Ctimechart%20avg(CPU)%20as%20%22CPU%20Usage%20(%25)%22%20avg(QueueLength)%20as%20QueueLength&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
    <panel depends="$Show_linux_Panels$">
      <title>Memory (%) : $tokClickValue1$</title>
      <chart>
        <search>
          <query>index="sag_unix_normal" sourcetype=hpux_memory host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" |rename $Show_linux_Panels$ as show_linux
    | extract pairdelim=":" kvdelim=":" 
    | eval mem_used = mvindex(split(mem_used," "),0) 
    | eval megabytes=((mem_used/1024)/1024) 
    | timechart span=10m latest(megabytes) as "Memory Utilization" </query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"Memory Used (%)":#EE9B8A}</option>
        <option name="charting.layout.splitSeries">1</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata_armada.csv%20%7Ctimechart%20avg(Memory)%20as%20%22Memory%20Used%20(%25)%22&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
    <panel depends="$Show_linux_Panels$">
      <title>Disk Usage(%) : $tokClickValue1$</title>
      <chart>
        <search>
          <query>index="sag_unix_normal" sourcetype=df host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" 
| rex field=_raw "(?&lt;UsePct&gt;\d+)\%" 
| rename $Show_linux_Panels$ as show_linux 
| timechart span=10m latest(UsePct) as UsePct</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"Disk Space Used(%)":#8973BD}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata_armada.csv%20%7Ctimechart%20avg(DiskUsage)%20as%20%22Disk%20Space%20Used(%25)%22&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
  </row>
  <row>
    <panel depends="$Show_linux_Panels$">
      <title>Average Memory Page_Reads/sec : $tokClickValue1$</title>
      <chart>
        <search>
          <query> index="sag_unix_normal" sourcetype=vmstat OR sourcetype=hpux_memory host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*"|rename $Show_linux_Panels$ as show_linux
    | timechart span=1m latest(mem_page_in) as "Memory Page Reads" </query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"Outbound(KB/s)":#ADFF2F,"Inbound(KB/s)":#87CEFA}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata2_armada.csv%20%7Ctimechart%20%20%20avg(Outbound_KB)%20as%20%22Outbound(KB/s)%22%20avg(Inbound_KB)%20as%20%22Inbound(KB/s)%22&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
    <panel depends="$Show_linux_Panels$">
      <title>Memory Commited Bytes In Use : $tokClickValue1$</title>
      <chart>
        <search>
          <query>index="sag_unix_normal" sourcetype=vmstat OR sourcetype=hpux_memory host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*"
    | rex field=_raw "mem\_pct\:\s+(?&lt;memUsedPct1&gt;[^\%]+)" 
    | eval memUsedPct=coalesce(memUsedPct,memUsedPct1) |rename $Show_linux_Panels$ as show_linux
    | timechart span=1m latest(memUsedPct) as "Memory commited bytes in Use" </query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"Outbound(Packets/s)":#FFA500,"Inbound(Packets/s)":#3CB371}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata2_armada.csv%20%7Ctimechart%20%20avg(Inbound_Packets)%20as%20%22Inbound(Packets/s)%22%20avg(Outbound_Packets)%20as%20%22Outbound(Packets/s)%22&amp;earliest=$earliest$&amp;latest=$latest$</link>
        </drilldown>
      </chart>
    </panel>
    <panel depends="$Show_linux_Panels$">
      <title>Logical Disk Free : $tokClickValue1$</title>
      <chart>
        <search>
          <query>index="sag_unix_normal" sourcetype=df host="$tokClickValueUpper$*" OR host="$tokClickValueLower$*" 
| eval PercentFreeSpace=if(PercentFreeSpace&lt;0,0,PercentFreeSpace), FreeMBytes=case(FreeMBytes="unknown",Avail) 
| eval FreeMBytes=if(FreeMBytes="unknown",PercentFreeSpace,FreeMBytes) 
| rename $Show_linux_Panels$ as show_linux 
| timechart span=1m avg(FreeMBytes) as "Megabytes Free"</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.fieldColors">{"DiskOutput(KB/s)":#E076A9,"DiskInput(KB/s)":#A686B2}</option>
        <option name="charting.legend.placement">top</option>
        <option name="refresh.display">preview</option>
        <drilldown>
          <link target="_blank">search?q=%7Cinputlookup%20infralookupdata2_armada.csv%20%7C%20rename%20%22DiskI/O%22%20as%20DiskIO%20%7Ceval%20DiskInput%20=mvindex(split(DiskIO,%22_%22),1)%20%7Ceval%20DiskOutput%20=mvindex(split(DiskIO,%22_%22),0)%20%7Ctimechart%20avg(DiskInput)%20as%20%22DiskInput(KB/s)%22%0Aavg(DiskOutput)%20as%20%22DiskOutput(KB/s)%22&amp;earliest=$timepicker.earliest$&amp;latest=$timepicker.latest$</link>
        </drilldown>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <title>Citrix Session</title>
      <chart>
        <search>
          <query>index=sag_custom_log_normal  sourcetype=citrix_session_log XSPW50B675S OR XSPW50F194C 
| rex field=_raw "\;[^\;]+\;(?&lt;Server_name&gt;[^\;]+)\;(?&lt;type&gt;[^\;]+)\;[^\;]+\;(?&lt;session&gt;.*)"
| timechart span=1m values(session) as session by Server_name</query>
          <earliest>$earliest$</earliest>
          <latest>$latest$</latest>
        </search>
        <option name="charting.chart">line</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">preview</option>
      </chart>
    </panel>
  </row>
</form>