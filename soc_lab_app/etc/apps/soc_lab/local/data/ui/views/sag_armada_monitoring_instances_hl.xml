<form version="1.1" hideExport="true">
  <label>Monitoring instances</label>
  <fieldset submitButton="false">
    <html> 
         <style> 
         /* To change gray body color at the bottom of the dashboard */
              body {
              background-color: white !important;
                  }
                  
                   /* To hide the real-time menu */
          div[data-test-panel-id="realTime"] {
             display: none;
         }
         /* To avoid message warning */
i.icon-warning-sign { display:none !important;}
         
         /* To hide ... button*/
            
        .dashboard-header .dashboard-menu .edit-other {
	          display:none !important;
             } 
              /*To add border line color*/
          .dashboard-panel{
              border: 1px #19367c solid;
             }  
			 
         .dashboard-body {
             padding: 0 20px 15px 20px;
             background-color: white;
             min-height: 500px;
             }
             
           h1  {
    color: #434392;
    }
           .dashboard-row .dashboard-panel h2.panel-title { 
             font-size: 15px !important; 
  color:white; 
  font-weight: Bold; 
  background-color: #19367c; 
  margin-bottom:1%;
   border:0.5px solid #19367c;
             color:white !important;
             text-align: center !important;
           } 
           
            [data-view="views/shared/appbar/Button"] [data-role="label"] {
            color: white;
            font-size: 1rem;
             font-weight: 500;
            }
          
          [data-view="views/shared/Icon"][data-icon="triangleDownSmall"] {
            color: white;
            }
        
            h1.dashboard-title{
          color: #19367c !important; }
          
           div[data-view="views/shared/appbar/Master"] {
             background-color: white;
             border-bottom: solid white;
             border-top: solid white;
             background-color:#19367c;
             }
             
              [data-role="app-name"] {
             color: white;
            
              font-weight: 1000;
            }

  [data-role="underline"] {
            background-color: silver !important;
            top: 34px;
            }
            i.icon-alert {
            visibility: hidden;

            }
            .alert {
            visibility: hidden;
            }
         </style> 
       </html>
    <input type="time" token="timepicker" searchWhenChanged="true">
      <label>Time Picker (CET)</label>
      <default>
        <earliest>-24h@h</earliest>
        <latest>now</latest>
      </default>
    </input>
  </fieldset>
  <row>
    <panel>
      <title>Total database size (MB)</title>
      <single>
        <search>
          <query>index=sag_database_normal sourcetype="database:oracle:table_space_usage" host="*O1P18698DG1*" 
| eval TOTAL_Phys=round(TOTAL_PHYSICAL_ALL_MB/1024,2) 
| bucket span=30m _time 
| dedup _time TABLESPACE_NAME 
| stats latest(TOTAL_Phys) as latest_total by _time,TABLESPACE_NAME,host 
| stats sum(latest_total) by _time</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
      </single>
    </panel>
  </row>
  <row>
    <panel>
      <title>Table space utilization</title>
      <chart>
        <search>
          <query>index=sag_database_normal armada_* sourcetype="database:oracle:table_space_usage" host="*O1P18698DG1*" 
| table INSTANCE_NAME,TABLESPACE_NAME,TOTAL_PHYSICAL_ALL_MB,CUR_USE_MB,PERCENT_USED 
| dedup TABLESPACE_NAME 
| chart values(PERCENT_USED) AS Utilization by TABLESPACE_NAME 
| eval OK=if(Utilization&lt;90, Utilization,0) 
| eval Warning=if(Utilization&gt;=90 AND Utilization&lt;95, Utilization,0) 
| eval Critical=if(Utilization&gt;= 95 , Utilization,0) 
| fields - Utilization</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
        </search>
        <option name="charting.axisLabelsY.majorUnit">25</option>
        <option name="charting.axisTitleY.text">Utilization (%)</option>
        <option name="charting.axisY.maximumNumber">100</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.legend.labels">[OK,Warning,Critical]</option>
        <option name="charting.legend.placement">none</option>
        <option name="charting.seriesColors">[0x27AE60,0xF8C471,0xCD6155]</option>
        <option name="height">212</option>
        <option name="refresh.display">progressbar</option>
        <option name="trellis.enabled">0</option>
      </chart>
    </panel>
    <panel>
      <title>Table space information</title>
      <table>
        <search>
          <query>index=sag_database_normal armada_* sourcetype="database:oracle:table_space_usage" host="*O1P18698DG1*" 
| table INSTANCE_NAME,TABLESPACE_NAME,TOTAL_PHYSICAL_ALL_MB,CUR_USE_MB,PERCENT_USED 
| dedup TABLESPACE_NAME 
| rename INSTANCE_NAME as "Instance name",TABLESPACE_NAME as "Tablespace name",TOTAL_PHYSICAL_ALL_MB as "TOTAL PHYSICAL (MB)",CUR_USE_MB as "Current usage (MB)",PERCENT_USED as "Perctage used (%)"</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="count">20</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">none</option>
        <option name="percentagesRow">false</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">false</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
        <format type="color" field="TABLESPACE_NAME">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="category"></scale>
        </format>
        <format type="color" field="Instance name">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="category"></scale>
        </format>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <title>The average percentage of active sessions within the total sessions during the specified time range</title>
      <chart>
        <search>
          <query>index=sag_database_normal sourcetype=*SessionUsedPct* O1P18698DG1
|timechart span=10m avg(Session_PCT) AS "Percentage of active sessions" by INSTANCE_NAME limit=0</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
        </search>
        <option name="charting.axisTitleX.text">% Session PCT</option>
        <option name="charting.chart">line</option>
        <option name="charting.chart.nullValueMode">zero</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">progressbar</option>
      </chart>
    </panel>
    <panel>
      <title>The average percentage of process pct used during the specified time range</title>
      <chart>
        <search>
          <query>index=sag_database_normal sourcetype=*ProcessUsedPct* O1P18698DG1
|timechart span=10m avg(Process_used_PCT) AS "Percentage of process used" by INSTANCE_NAME limit=0</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
        </search>
        <option name="charting.axisTitleX.text">% Process PCT USed</option>
        <option name="charting.axisTitleY.visibility">collapsed</option>
        <option name="charting.chart">line</option>
        <option name="charting.drilldown">none</option>
        <option name="refresh.display">progressbar</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <title>Database reference</title>
      <table>
        <search>
          <query>index=sag_database_normal sourcetype=*dump_location* O1P18698DG1
| dedup NAME, VALUE
| table NAME, VALUE
| rename NAME as "Syntax", VALUE as "Default value"</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
        </search>
        <option name="count">10</option>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
      </table>
    </panel>
    <panel>
      <title>Log location</title>
      <table>
        <search>
          <query>index=sag_database_normal sourcetype=*log_location* O1P18698DG1 
| dedup INSTANCE_NAME , VALUE 
| table INSTANCE_NAME,VALUE 
| rename INSTANCE_NAME as "INSTANCE NAME" , VALUE as "Log location"</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
        </search>
        <option name="count">10</option>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
      </table>
    </panel>
    <panel>
      <title>Job Failure by Instance</title>
      <viz type="status_indicator_app.status_indicator">
        <search>
          <query>index=sag_database_normal O1P18698DG1  sourcetype="database:oracle:failed_jobs" 
| stats sum(FAILURE_COUNT) as Failure by INSTANCE_NAME 
| eval Failure_Count=INSTANCE_NAME+" (".Failure.")" 
| fields Failure_Count
| transpose 
| fields - column 
| rename "row 1" as Instance1 ,"row 2" as Instance2</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
        <option name="status_indicator_app.status_indicator.fillTarget">text</option>
        <option name="status_indicator_app.status_indicator.fixIcon">info-circle</option>
        <option name="status_indicator_app.status_indicator.showOption">1</option>
        <option name="status_indicator_app.status_indicator.staticColor">#f1813f</option>
      </viz>
    </panel>
  </row>
  <row>
    <panel>
      <title>Size Information by Objectname</title>
      <table>
        <search>
          <query>index=sag_database_normal DS_SYSNM="*O1P18698DG1*" 
| eval VALUE_MB=if( len(VALUE) &gt; 4,((VALUE/1024)/1024), VALUE) 
| chart latest(VALUE_MB) as VALUE_MB by OBJNM,SUBOBJNM 
| foreach * 
    [ eval &lt;&lt;FIELD&gt;&gt;=if(&lt;&lt;FIELD&gt;&gt;=OBJNM,&lt;&lt;FIELD&gt;&gt;,round(&lt;&lt;FIELD&gt;&gt;,2))." MB"]</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
        </search>
        <option name="count">2</option>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
        <format type="color" field="Status command Listener">
          <colorPalette type="expression">if (like(value,"%refused%"),"#CD6155","#27AE60")</colorPalette>
        </format>
      </table>
    </panel>
    <panel>
      <title>Size Information by System name</title>
      <table>
        <search>
          <query>index=sag_database_normal  DS_SYSNM="*O1P18698DG1*"
| eval VALUE_MB=if( len(VALUE) &gt; 4,((VALUE/1024)/1024), VALUE)
| stats latest(SYSTYPENM) as "System type" ,latest(eval(round(VALUE_MB,2))) as "Latest value collected by object Name (MB)" by OBJNM,SUBOBJNM,DS_SYSNM
| sort SUBOBJNM | fields DS_SYSNM,"System type",OBJNM,SUBOBJNM,"Latest value collected by object Name (MB)"
| rename OBJNM as "Object name",DS_SYSNM as "System name"</query>
          <earliest>$timepicker.earliest$</earliest>
          <latest>$timepicker.latest$</latest>
        </search>
        <option name="count">5</option>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
        <format type="color" field="Status command Listener">
          <colorPalette type="expression">if (like(value,"%refused%"),"#CD6155","#27AE60")</colorPalette>
        </format>
        <format type="color" field="System name">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
      </table>
    </panel>
  </row>
</form>